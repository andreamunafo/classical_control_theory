---

title: SISO Loop Shaping


keywords: fastai
sidebar: home_sidebar



nb_path: "08_Main_types_of_loops_and_transfer_functions.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 08_Main_types_of_loops_and_transfer_functions.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="The-classical-viewpoint">The classical viewpoint<a class="anchor-link" href="#The-classical-viewpoint"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Standard "servo" or tracking configuration of classical feedback control:</p>
<tr>
    <td> <img src="img/standard-control-loop.png" alt="standard-control-loop" style="width: 550px;"/> </td>
</tr>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>$R(s)$: Controller/Compensator</li>
<li>$G(s)$: Plant</li>
<li>$Y_{ref}(s)$: input (reference)</li>
<li>$e(s)$: error</li>
<li><p>$U(s)$: control signal</p>
</li>
<li><p>This is the "standard control loop"</p>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Alternatives">Alternatives<a class="anchor-link" href="#Alternatives"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<tr>
    <td> <img src="img/control-loop-alternative-1.png" alt="control-loop-alternative-1" style="width: 550px;"/> </td>
    <td> <img src="img/control-loop-alternative-2.png" alt="control-loop-alternative-2" style="width: 550px;"/> </td>
</tr>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>We can always reshape them into the standard form.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Disturbances">Disturbances<a class="anchor-link" href="#Disturbances"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>More in general:</p>
<tr>
    <td> <img src="img/disturbances.png" alt="disturbances" style="width: 550px;"/> </td>
</tr><ul>
<li>Load disturbance: assumed to act on the process input (but can enter in many different ways)</li>
<li>Measurement disturbance</li>
<li>The process is a system with three inputs (control signal, load disturbance and measurement noise) and one output, the measured signal.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Or equivalently</p>
<tr>
    <td> <img src="img/disturbances-1.png" alt="disturbances-1" style="width: 550px;"/> </td>
    <td> <img src="img/system-generic.png" alt="system-generic" style="width: 550px;"/> </td>
</tr><ul>
<li>The feedback loop is influenced by three signals: $y_{ref}$, $d$, and $n$.</li>
<li>There are three interesting outputs: $e$, $u$, $y$</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Comments</strong></p>
<ul>
<li>Attenuation of load disturbances is often a primary goal for control</li>
<li>Load disturbances are typically dominated by low frequencies (slow varying). <ul>
<li>Example: car cruise control: disturbance is gravity and changes with the slope of the road</li>
</ul>
</li>
<li>Measurement noise corrupts the information about the process vari- able that the sensors delivers</li>
<li>Measurement noise is typically higher frequency (average typically zero)</li>
<li>Sometimes sensors have dynamics: often very accurate values are provided by slow sensors</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In a typical control design problem we would choose the compensator $R(s)$ such as:</p>
<ul>
<li>the closed-loop system is stable</li>
<li>the loop gain $R(s)G(s)$ has large magnitude at frequencies (low frequencies typically) where the power of the reference input $r$ (and the plant disturbance $d$) is concentrated</li>
<li>the loop gain has small magnitude at frequencies (high frequency typically) where the power of the measurement noise $n$ is concentrated).</li>
</ul>
<p><strong>Note</strong> To obtain all the previous requirements it is convenient to state the close loop stability in terms of the open loop loop gain. This is provided by the <em>Nyquist stability criterion</em> as we will see later.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>To understand the second and third requirements more, we can write the transfer function between any input-output pair</p>
$$
E(s) = \frac{1}{1+RG}Y_{ref}(s), \hspace{2cm} Y(s) = \frac{1}{1+RG}D(s)
$$$$
Y(s) = \frac{RG}{1+RG}Y_{ref}(s), \hspace{2cm} Y(s) = \frac{RG}{1+RG}N(s)
$$$$
U(s) = \frac{R}{1+RG}Y_{ref}(s) \hspace{2cm} \hspace{4cm}
$$<ul>
<li>Some transfer functions are the same</li>
<li>All transfer functions have $1 + RG$ at the denominator: we only study stability once</li>
<li>Transfer functions on the left column give the response of process variable to the set point</li>
<li>The transfer function $\frac{1}{(1 + RG)}$ tells how the process variable reacts to load disturbances </li>
<li><p>The transfer function $\frac{RG}{(1 + RG)}$ gives the response of the output signal to measurement noise.</p>
</li>
<li><p>The transfer function $L(s)=R(s)G(s)$ is called <em>loop gain</em> or <em>loop transfer function</em>.</p>
</li>
</ul>
<hr>
<ul>
<li><strong>Sensitivity function</strong></li>
</ul>
$$
S(s) = \frac{1}{1+RG}
$$<ul>
<li>Describes how feedback influences the disturbances</li>
<li>If $|RG|$ is large at frequencies where the power of the disturbance is concentrated, then $|S|$ is small and the effect of the disturbance on the output is attenuated</li>
<li>Lower values of $|S|$ means higher attenuation of the external disturbance.</li>
<li>Typically, plant disturbances are low frequency, and one would like $|RG|$ to be large at low frequency</li>
</ul>
<p><strong>Note</strong></p>
<ul>
<li>The same transfer function also relates $e$ and $y_{ref}$.</li>
<li>If we want $y$ to track $r$ with good accuracy we want a small response of the error signal to the driving signal (<em>tracking accuracy</em>).</li>
<li>$|S|$ should be small (or equivalently $|RG|$ large) at frequencies where the power of $y_{ref}$ is concentrated.</li>
<li>In most applications the reference signal is slowly varying and this means that we need $|RG|$ to be large at low frequencies</li>
</ul>
<hr>
<ul>
<li><p><strong>Complementary sensitivity</strong>
$$
T(s) = \frac{RG}{1+RG}
$$</p>
</li>
<li><p>Maps the noise input $n$ to the output $y$</p>
</li>
<li>Noise rejection defines high frequency specifications</li>
<li><p>$S+T=1$</p>
</li>
<li><p>Note that $T$ is also the transfer function from $y_{ref}$ to $y$.</p>
</li>
<li>If $|RG|$ is small at frequencies where the noise $n$ is concentrated then $|T|$ will be small and the effect of the noise on the output is minimised.</li>
<li>Measurement noise tend to occur at high frequency and this means that typically we would like $|RG|$ to be small at high frequency</li>
<li>This constraint does not conflict with the low-frequency constraints for the disturbance $d$ and the reference $y_{ref}$.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Control-design-task">Control design task<a class="anchor-link" href="#Control-design-task"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>Given a plant $G$, we need to design a compensator $R$ such that:</li>
<li>The loop gain magnitude |RG| is large at low frequencies (to track the reference and reject disturbance)</li>
<li>The loop gain magnitude |RG| rolls off (steeply decreases) to low values at high frequencies (to reject measurement noise)</li>
<li>The stability of the system must be guaranteed</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Final Note:</strong></p>
<ul>
<li>Remember that we can have additional requirements on:<ul>
<li>steady state response. This is typically specified in terms of response to known signals (e.g., step response error less than desired threshold (e.g. &lt;3%), etc)</li>
<li>transient response (e.g. settling time, raise time, maximum overshoot - see also notebook <code>05_system_response.ipynb</code></li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr>

</div>
</div>
</div>
</div>
 

